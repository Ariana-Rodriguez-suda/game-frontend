<div class="level-container">

  <!-- HUD superior -->
  <app-hud [coins]="coins" [level]="1"></app-hud>

  <!-- Área de juego con desplazamiento -->
  <div class="game-area-scroll">

    <!-- Personaje principal -->
    <div class="character" #character></div>

    <!-- Plataforma base -->
    <div class="platform ground"></div>

    <!-- Plataformas elevadas -->
    <div class="platform elevated" style="left: 400px; bottom: 100px;"></div>
    <div class="platform elevated" style="left: 700px; bottom: 150px;"></div>
    <div class="platform elevated" style="left: 1000px; bottom: 80px;"></div>

    <!-- Monedas -->
    <div 
      class="coin" 
      *ngFor="let moneda of monedasMapa" 
      [style.left.px]="moneda.x">
      🪙
    </div>

    <!-- Bloques fraccionarios -->
    <div 
      class="block" 
      *ngFor="let block of blocks" 
      [attr.id]="'block-' + block.id"
      [attr.data-id]="block.id"
      (click)="empujarBloque(block.id)"
      role="listitem"
      tabindex="0"
      [style.left.px]="block.x"
      [attr.aria-label]="'Bloque con fracción ' + block.numerator + ' sobre ' + block.denominator">

      <div class="block-fraction">
        <div 
          class="block-part" 
          *ngFor="let part of [].constructor(block.denominator); let i = index"
          [class.filled]="i < block.numerator">
        </div>
      </div>

      <span class="fraction-label">{{ block.numerator }}/{{ block.denominator }}</span>
    </div>

    <!-- NPC en el puente -->
    <div class="npc" [style.left.px]="npcPosition.x">
      🧓
    </div>
  </div>

  <!-- Cuadro de mensajes -->
  <div class="message-box">
    <p *ngFor="let msg of messages">{{ msg }}</p>
  </div>

  <!-- Indicador de modo suma -->
  <div class="status-box">
    <span *ngIf="mode === 'suma'">🔢 Modo suma activado</span>
  </div>

  <!-- Pantalla final -->
  <div *ngIf="nivelCompletado" class="final-screen">
    <h2>¡Nivel completado!</h2>
    <p>Estrellas: {{ estrellasGanadas }}</p>
    <app-button (click)="avanzar()">Siguiente nivel</app-button>
  </div>

</div>
